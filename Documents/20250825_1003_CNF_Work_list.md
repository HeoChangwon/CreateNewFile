# CreateNewFile 개발 작업 내용 정리

**작업 일시**: 2025년 8월 25일 10:03  
**프로젝트**: CreateNewFile - 파일 생성 도구  
**작업자**: Claude & 사용자

---

## 📋 작업 개요

이번 세션에서는 CreateNewFile 프로그램의 안정성과 사용성을 크게 개선하는 여러 기능을 구현했습니다.

---

## 🔧 주요 작업 내용

### 1. ViewModel 초기화 문제 해결 ✅
**문제**: 프로그램 실행 시 화면이 표시되지 않거나 콤보박스가 비어있는 문제 발생

**해결 과정**:
- `App.xaml.cs`에서 `InitializeAsync().Wait()`으로 인한 데드락 문제 진단
- `Dispatcher.BeginInvoke` 방식 시도 후 여전히 문제 발생
- **최종 해결**: `DispatcherTimer` 방식으로 변경
  ```csharp
  var timer = new System.Windows.Threading.DispatcherTimer();
  timer.Interval = TimeSpan.FromMilliseconds(100);
  timer.Tick += async (sender, e) => {
      timer.Stop();
      await mainViewModel.InitializeAsync();
  };
  timer.Start();
  ```

### 2. 기본 설정 파일 시스템 구축 ✅
**목적**: 프로그램 신규 설치 시 유용한 기본값 제공

**구현 내용**:
- `config/appsettings.default.json` 템플릿 파일 생성
- 기본 프리셋 항목들 정의:
  - **약어**: DOC, SPEC, TEST, LOG
  - **제목**: Requirements, Design, Development_note(즐겨찾기), User_manual, Meeting_notes
  - **접미어**: v1, draft, final, backup  
  - **확장자**: .txt(즐겨찾기), .md, .docx, .log
- `SettingsService.InitializeDefaultSettingsAsync()` 메서드 개선
- 프로젝트 빌드 시 템플릿 파일 자동 복사 설정

### 3. 설정 창 닫기 시 콤보박스 자동 갱신 ✅
**요구사항**: "설정 관리" 창을 닫으면 최종 항목 목록으로 콤보박스 갱신

**구현 방식**:
- `RefreshComboBoxesAsync()` 메서드 추가 - 효율적인 부분 갱신
- 스마트한 선택값 복원 로직:
  ```csharp
  private void RestoreOrSetFirstSelection<T>(ObservableCollection<T> collection, 
      string previousValue, Action<string> setSelection)
  ```
- **중요 개선**: 출력 폴더와 템플릿 파일은 갱신에서 제외하여 현재 작업 경로 유지

### 4. 버전 정보 시스템 구축 ✅
**요구사항**: 윈도우 제목에 "CreateNewFile v1.0.001 (Build: 2025-08-25 11:48)" 형식으로 표시

**구현 내용**:
- `CreateNewFile.csproj`에 버전 정보 추가:
  ```xml
  <AssemblyVersion>1.0.1.0</AssemblyVersion>
  <AssemblyInformationalVersion>1.0.001</AssemblyInformationalVersion>
  <Product>CreateNewFile</Product>
  ```
- `Utils/VersionHelper.cs` 클래스 생성 - 런타임 버전 정보 관리
- 자동 빌드 날짜 생성 (어셈블리 파일 수정 시간 기반)
- `MainWindow` 제목에 동적 버전 정보 표시

---

## 📁 파일 변경 내역

### 새로 생성된 파일
- `config/appsettings.default.json` - 기본 설정 템플릿
- `Utils/VersionHelper.cs` - 버전 정보 관리 클래스

### 수정된 파일
- `App.xaml.cs` - 초기화 로직 개선 (Timer 방식)
- `ViewModels/MainViewModel.cs` - 콤보박스 갱신 메서드 추가
- `Services/SettingsService.cs` - 기본 템플릿 로드 로직 추가  
- `Views/MainWindow.xaml.cs` - 동적 제목 설정
- `Views/MainWindow.xaml` - 제목 속성 제거
- `CreateNewFile.csproj` - 버전 정보 및 빌드 설정 추가

---

## 🎯 성과 및 개선점

### ✨ 사용자 경험 개선
- **안정성**: 프로그램 실행 시 화면이 나타나지 않는 치명적 버그 해결
- **효율성**: 설정 변경 후 즉시 반영, 프로그램 재시작 불필요
- **편의성**: 신규 설치 시 바로 사용 가능한 기본 프리셋 제공
- **정보성**: 버전 정보를 통한 명확한 프로그램 식별

### 🔧 기술적 개선
- **데드락 해결**: UI 스레드 블로킹 문제 완전 해결
- **메모리 효율**: 전체 재로드 대신 필요한 부분만 갱신
- **유지보수성**: 버전 관리 시스템 체계화
- **확장성**: 기본 설정 템플릿을 통한 쉬운 커스터마이징

---

## 📝 버전 정보 관리 가이드

### 버전명 변경 방법
**파일**: `CreateNewFile.csproj`
```xml
<AssemblyInformationalVersion>1.0.001</AssemblyInformationalVersion>
<!-- 예: 2.1.005로 변경 -->
<AssemblyInformationalVersion>2.1.005</AssemblyInformationalVersion>
```

### 제품명 변경 방법  
```xml
<Product>CreateNewFile</Product>
<!-- 예: 다른 이름으로 변경 -->
<Product>MyNewProduct</Product>
```

### 빌드 날짜
- **자동 생성**: 빌드할 때마다 어셈블리 파일 수정 시간 기준
- **형식**: "yyyy-MM-dd HH:mm"
- **수동 수정 불필요**

---

## 🔄 다음 작업 제안

1. **설정 내보내기/가져오기** - 사용자 설정 백업 기능
2. **다크 모드 지원** - UI 테마 시스템
3. **단축키 지원** - 키보드 접근성 개선
4. **최근 사용 항목** - 자주 사용하는 설정 빠른 액세스
5. **플러그인 시스템** - 확장 가능한 템플릿 엔진

---

## 📊 현재 상태

- ✅ **안정성**: 실행 오류 해결, 안정적 동작
- ✅ **기능성**: 모든 핵심 기능 정상 작동
- ✅ **사용성**: 직관적이고 편리한 UI
- ✅ **확장성**: 모듈화된 구조로 향후 개선 용이

**프로그램 상태**: 배포 준비 완료 🚀

---

*이 문서는 2025년 8월 25일 개발 세션의 작업 내용을 정리한 것입니다.*