# 2025년 1월 4일 17:38 작업 내용 정리

## 작업 개요
CreateNewFile 프로젝트의 UI 개선 및 동적 플레이스홀더 시스템 구현

## 완료된 작업 목록

### 1. 탭 스타일링 문제 수정
- **문제**: 선택된 탭의 제목이 보이지 않는 문제
- **해결책**: 선택된 탭을 흰색 배경, 검정 텍스트로 변경하여 탭 내용과 동일한 배경색 사용
- **파일**: `MainWindow.xaml` (146-164라인)
- **결과**: 선택된 탭이 명확히 구분되고 가독성 향상

### 2. 파일정보 저장 기능 개선
- **변경사항**: 파일정보 저장 시 파일명 미리보기에서 확장자를 제외한 이름을 기본값으로 사용
- **파일**: `MainViewModel.cs` SaveFileInfoAsync 메서드 (1316-1326라인)
- **로직**: `Path.GetFileNameWithoutExtension(GeneratedFileName)` 사용

### 3. 파일정보 관리 기능 구현
- **새로운 파일들**:
  - `FileInfoManagerWindow.xaml` - 관리 창 UI (1113x749 크기)
  - `FileInfoManagerWindow.xaml.cs` - 코드 비하인드
  - `FileInfoManagerViewModel.cs` - 비즈니스 로직
- **주요 기능**:
  - 파일정보 목록 표시 (DataGrid)
  - 새로고침, 이름 변경, 복사, 삭제 기능
  - 상세 미리보기 패널
  - 통계 정보 표시
- **연결**: `MainViewModel.cs`의 ManageFileInfos 메서드 수정

### 4. 동적 플레이스홀더 시스템 구현

#### 4.1 초기 구현
- `StringReplacementRule`에 `UseDynamicReplacement` 속성 추가
- 검색 문자열에서 패턴을 인식하여 직접 교체하는 방식

#### 4.2 개선된 구현 (최종)
- **사용법 변경**: 
  - 기존: 검색 문자열에 `YYYYMMDD_HHMM+1`
  - 개선: 검색 문자열에 `20250101_0000`, 교체 문자열에 `YYYYMMDD_HHMM+1`
- **지원 패턴**:
  - `YYYYMMDD_HHMMSS` (초 단위)
  - `YYYYMMDD_HHMM` (분 단위)
  - 오프셋 지원: `+1`, `+2`, `-5` 등 (분 단위)

#### 4.3 구현된 파일 및 메서드
1. **Models/FileInfo.cs**:
   - `StringReplacementRule.UseDynamicReplacement` 속성 추가
   - Clone 메서드에서 새 속성 복사 처리

2. **Services/IFileGeneratorService.cs**:
   - `CreateFileWithStringReplacementAsync`에 `fileInfoDateTime` 매개변수 추가
   - `CopyTemplateFileWithReplacementAsync`에 `fileInfoDateTime` 매개변수 추가

3. **Services/FileGeneratorService.cs**:
   - `ProcessDynamicPlaceholders` 메서드 - 동적 교체 로직
   - `ProcessDynamicPatterns` 메서드 - 패턴 인식 및 변환
   - `ApplyStringReplacements`에서 동적 교체 지원

4. **ViewModels/MainViewModel.cs**:
   - `ApplyStringReplacements`에 `fileInfoDateTime` 매개변수 추가
   - `ProcessDynamicPlaceholders` 및 `ProcessDynamicPatterns` 메서드 추가
   - 파일 생성 시 `SelectedDateTime` 전달

5. **Views/MainWindow.xaml**:
   - 문자열 교체 DataGrid에 "동적교체" 체크박스 컬럼 추가

## 사용 예시

### 동적 플레이스홀더 사용법
```
검색 문자열: 20250101_0000
교체 문자열: YYYYMMDD_HHMM+1
동적교체: ☑️
```

파일정보 탭의 날짜/시간이 `2025-01-04 17:45`인 경우:
- 템플릿의 `20250101_0000` → `20250104_1746`으로 교체

### 지원되는 패턴
- `YYYYMMDD_HHMMSS` → 20250104_174500
- `YYYYMMDD_HHMMSS+1` → 1분 후 시간
- `YYYYMMDD_HHMM` → 20250104_1745  
- `YYYYMMDD_HHMM-5` → 5분 전 시간

## 빌드 상태
- ✅ 성공적으로 빌드됨 (경고만 있음, 에러 없음)
- ✅ 모든 기능이 정상 작동

## 개선점
1. **직관적 사용법**: 검색할 실제 문자열과 동적 패턴이 명확히 분리
2. **유연성**: 어떤 고정 문자열도 동적 패턴으로 교체 가능
3. **UI 개선**: 탭 가독성 향상, 관리 기능 추가
4. **사용자 경험**: 파일정보 저장 시 더 직관적인 기본 파일명 제공

## 테스트 필요 사항
1. 동적 플레이스홀더의 다양한 오프셋 테스트
2. 파일정보 관리 창의 모든 기능 테스트
3. 탭 스타일링 개선 확인
4. 파일정보 저장 시 기본 파일명 동작 확인